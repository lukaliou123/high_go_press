# HighGoPress 最优KRaft配置
# 针对高并发计数服务优化

############################
# 基础配置
############################
process.roles=broker,controller
node.id=1
controller.quorum.voters=1@localhost:9093

############################
# 网络配置
############################
listeners=PLAINTEXT://localhost:9092,CONTROLLER://localhost:9093
advertised.listeners=PLAINTEXT://localhost:9092
controller.listener.names=CONTROLLER
inter.broker.listener.name=PLAINTEXT
listener.security.protocol.map=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT

############################
# 存储配置
############################
log.dirs=/tmp/kraft-combined-logs

############################
# 性能优化配置
############################
# 网络线程数 - 处理网络请求
num.network.threads=8

# IO线程数 - 处理磁盘IO
num.io.threads=16

# 网络缓冲区大小
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# 默认分区数设置为4（最优并发）
num.partitions=4

# 副本配置
default.replication.factor=1
min.insync.replicas=1

# 日志段配置
log.segment.bytes=1073741824
log.retention.hours=24
log.retention.check.interval.ms=300000

# 生产者优化
num.replica.fetchers=4
replica.fetch.max.bytes=1048576
message.max.bytes=1000000

# 批处理优化
replica.fetch.wait.max.ms=100
fetch.purgatory.purge.interval.requests=1000
producer.purgatory.purge.interval.requests=1000

# 自动创建topic
auto.create.topics.enable=true

# 内部topic配置
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

# 压缩配置
compression.type=snappy 